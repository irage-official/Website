<!DOCTYPE html>
<html lang="fa" dir="rtl" id="html-root">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ایراژ - گاه‌شمار مستقل ایرانی که میراث کهن ما را حفظ می‌کند">
    <title data-title-fa="ایراژ | گاه‌شمار میراث ایرانی" data-title-en="Irage | Iranian Heritage Calendar">ایراژ | گاه‌شمار میراث ایرانی</title>
    <link rel="preload" href="assets/fonts/Inter.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="assets/fonts/YekanBakh-VF.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="stylesheet" href="assets/css/style.css" id="main-css">
    <link rel="icon" type="image/png" href="assets/images/logo_centered.png">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <script>
        // Prevent language flash - set language immediately before page renders
        (function() {
            try {
                const savedLang = localStorage.getItem('preferredLanguage');
                if (savedLang === 'en' || savedLang === 'fa') {
                    const html = document.documentElement;
                    html.setAttribute('lang', savedLang);
                    html.setAttribute('dir', savedLang === 'fa' ? 'rtl' : 'ltr');
                    
                    // Hide/show language elements immediately
                    const faElements = document.querySelectorAll('[data-lang="fa"]');
                    const enElements = document.querySelectorAll('[data-lang="en"]');
                    
                    faElements.forEach(el => {
                        el.style.display = savedLang === 'fa' ? '' : 'none';
                    });
                    
                    enElements.forEach(el => {
                        el.style.display = savedLang === 'en' ? '' : 'none';
                    });
                    
                    // Update page title
                    const titleElement = document.querySelector('title');
                    if (titleElement) {
                        const titleFa = titleElement.getAttribute('data-title-fa');
                        const titleEn = titleElement.getAttribute('data-title-en');
                        if (savedLang === 'en' && titleEn) {
                            titleElement.textContent = titleEn;
                        } else if (savedLang === 'fa' && titleFa) {
                            titleElement.textContent = titleFa;
                        }
                    }
                }
            } catch(e) {
                // Silently fail if localStorage is not available
            }
        })();
    </script>
    <style>
        /* Prevent FOUC - hide body until CSS and JS are loaded */
        body {
            visibility: hidden;
            opacity: 0;
        }
        body.loaded {
            visibility: visible;
            opacity: 1;
            transition: opacity 0.2s ease-in;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <site-header data-active="home"></site-header>

    <!-- Body Content -->
    <div class="body-content">
        <!-- Decorative Shapes -->
        <div class="decorative-shape shape-left"></div>
        <div class="decorative-shape shape-right"></div>
        
        <!-- Content Section -->
        <div class="content-section">
            <!-- Hero Title -->
            <h1 class="home-title">
                <span data-lang="fa">به افتخار کسانی که برای آزادی جنگیدند</span>
                <span data-lang="en" style="display: none;">Honoring those who fought for freedom</span>
            </h1>
            
            <!-- Actions -->
            <div class="actions-section">
            <!-- Download Buttons -->
            <div class="download-section">
                <a href="#" class="download-btn app-store">
                        <img src="assets/images/Appstore.png" alt="Download on the App Store" class="store-image" loading="lazy">
                </a>
                <a href="#" class="download-btn google-play">
                        <img src="assets/images/Google Play.png" alt="GET IT ON Google Play" class="store-image" loading="lazy">
                </a>
            </div>
            
            <!-- Direct Download Link -->
            <a href="https://github.com/irage-official/Calendar/releases/latest" target="_blank" rel="noopener noreferrer" class="direct-download">
                <span data-lang="fa">دانلود مستقیم اندروید</span>
                <span data-lang="en" style="display: none;">Direct Download</span>
            </a>
            </div>
        </div>
            
        <!-- Screenshots Section -->
        <div class="screenshots-section">
            <div class="screenshots-container">
                <img src="assets/images/shots-en.png" alt="App Screenshots" class="screenshots-image" data-lang="en" style="display: none;" loading="lazy">
                <img src="assets/images/shots-fa.png" alt="اسکرین‌شات اپلیکیشن" class="screenshots-image" data-lang="fa" loading="lazy">
            </div>
        </div>
    </div>

    <script>
        // Force reload CSS to bypass Cloudflare cache
        (function() {
            const timestamp = Date.now();
            const cssLink = document.getElementById('main-css');
            if (cssLink) {
                cssLink.href = 'assets/css/style.css?v=' + timestamp;
            }
        })();
    </script>
    <script src="assets/js/main.js" id="main-js"></script>
    <script>
        // Force reload JS to bypass Cloudflare cache
        (function() {
            const timestamp = Date.now();
            const jsScript = document.getElementById('main-js');
            if (jsScript) {
                jsScript.src = 'assets/js/main.js?v=' + timestamp;
            }
        })();
    </script>
    <script>
        // Show body after CSS and JS are fully loaded
        (function() {
            function showBody() {
                document.body.classList.add('loaded');
            }
            
            if (document.readyState === 'complete') {
                setTimeout(showBody, 50);
            } else {
                window.addEventListener('load', function() {
                    setTimeout(showBody, 50);
                });
            }
            setTimeout(showBody, 1000);
        })();
    </script>
</body>
</html>

